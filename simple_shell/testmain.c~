#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
# define BUF_SIZE 128

int print_char(char c);
char *read_line(const int fd);
int strings_compare(char *s1, const char *s2);
int main()
{
  char c;
  int rd;

  while(1) 
    {
      print_char('$');
      /*c = getchar();*/
      rd = read(0, &c, 1);
      if(rd == -1)
	{
	  perror("Read");
	  return (1);
	}
      if(c == EOF)
	return (0);
    }
  print_char('\n');
  return (0);
}

int print_char(char c)
{
  return (write(1, &c, 1));
}

/*char *read_line(const int fd)
{
  int bufsize;                                                                                                                                         
  char *buffer;
  int rd;
  int i;
  char c;

  while(1)
    {
  c = '\0';
  i = 0;
  bufsize = BUF_SIZE;              
  buffer = malloc(bufsize * sizeof(char));                                                                                                             
  if(buffer == NULL)                                                                                                                                     
    {                                                                                                                                                    
      perror("Malloc");                                                                                                                                  
      return NULL;                                                                                                                                      
    }     
  buffer[0] = '\0';
      rd = read (fd, buffer, BUF_SIZE);                                                                                                                        if(rd == -1)                                                                                                                                               return NULL;                                                                                                                                     
      buffer[rd+1] = '\0';
      if(strings_compare(buffer,"exit") == 0)
	 exit(0);
      else if(buffer[rd] == '\n')
	{
	  print_char('$');
	}
      printf("%d", rd);
   }
  free(buffer);
  return buffer;
}

  int strings_compare(char *s1, const char *s2)
  {
    int i;
    i = 0;
    while((s1[i] != '\0') && (s1[i] == s2[i]))
      {
	i++;
      }
    if(s1[i] == s2[i])
      return 0;
    return (s1[i] - s2[i]);
  }
*/
